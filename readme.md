# ISO 3166-1 country codes for Ada.

This is a full lookup table for the ISO 3166-1 country records in Ada.  In the future, I would like to include iso-3166-2 and iso-3166-3 in this. If that would be useful to you, then read the section below under "Contribute".

**NOTE:** This is currently in pre-release, and may be subject to change.  I'm actively looking for feedback before I publish to Alire.  If this looks good as-is, it'll be published soon, then I'll update the "Installation" section.

## Installation
Coming Soon: Alire integration.

The source files are currently being generated by another app written in Ada, but you don't need to run it in order to use this library, as I've already generated it.  For now, you can just download the ads and adb files under `/src`, or configure your [Alire Pins](https://alire.ada.dev/docs/#work-in-progress-dependency-overrides).

If you want to generate the source files yourself, see below.

## Usage
The record in this structure is as follows:
```Ada
   --  The ISO_3166_1 country to be referenced.
   type ISO_3166_1 (Name_Length : Natural) is record
      Name    : String (1 .. Name_Length);
      Alpha_2 : Alpha_2_Code;
      Alpha_3 : Alpha_3_code;
      Numeric : Natural;
   end record;
```
There are several functions that return this record, depending on what item you're using to look it up:
```Ada
with ISO_3166; use ISO_3166;
with Ada.Locales;
declare
   --  All of these will return the USA country.
   USA : constant ISO_3166_1 := From_Alpha2 ("US");   --  Country Code
   AUS : constant ISO_3166_1 := From_Alpha3 ("AUS");  --  Country Code3
   BIH : constant ISO_3166_1 := From_Numeric (070);  --  Numeric
   ATA : constant ISO_3166_1 := From_Numeric ("010"); --  Numeric String
   --  Get more information from Ada.Locales country code.
   Local_Country : ISO_3166_1 := From_Country_Code (Ada.Locales.Country);
begin
   Assert (USA.Name = "United States of America (the)");
   Assert (AUS.Name = "Australia");
   Assert (BIH.Name = "Bosnia and Herzegovina");
   Assert (ATA.Name = "Antarctica");
end;
``` 
There's also a vector (derived from `Ada.Containers.Indefinite_Vectors`) that can contain all of the countries:
```Ada
with ISO_3166;    use ISO_3166;
with Ada.Text_IO; use Ada.Text_IO;
declare
   V : constant Countries := All_Countries;
begin
   for X of V loop
      Put_Line (X.Name);
      Put_Line (To_String (X.Alpha_2));
   end loop;
end;
```

## Generating an update
1. Create the CSV
   1. Visit the [Country Code Search](https://www.iso.org/obp/ui/#search/code/)
   2. Be sure to set the page length to 300 to catch everything.
   3. Paste the table into a CSV
   4. **REMOVE** the French Short Name, column B.
   5. Verify the CSV Has the following headers in this exact order: `English short name,Alpha-2 code,Alpha-3 code,Numeric`
   6. Save the CSV at the root level of the `generate` folder.
2. Build the generate app
   1. `cd generate`
   2. `alr build`
3. Run the generate app
   1. `bin/generate "countries.csv"`
   2. The source files will be stored in the `generate/output` directory.
4. Copy the source files to `iso_3166/src` (not `generate/src`!) folder.

## Sources
https://www.iso.org/obp/ui/#search/code/

## Contribute
If someone would like to give me 300 CHF (however much that is in USD) every time a new version of the [Country Codes Collection](https://www.iso.org/publication/PUB500001.html) is made available, I'll be happy to start using XML dumps like in the iso4217 library.

If the Country Codes Collection contains iso-3166-2 and iso-3166-3, I can start including those to build a more complete list.
NOTE: I probably won't be able to share the XML files if this happens, but I can still provide the generator once written.